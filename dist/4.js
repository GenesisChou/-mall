webpackJsonp([4],{179:function(t,e,a){var r,o;a(294),r=a(328);var i=a(273);o=r=r||{},"object"!=typeof r.default&&"function"!=typeof r.default||(o=r=r.default),"function"==typeof o&&(o=o.options),o.render=i.render,o.staticRenderFns=i.staticRenderFns,o._scopeId="data-v-409b263f",t.exports=r},198:function(t,e,a){e=t.exports=a(172)(),e.push([t.i,".v-list-item[data-v-4e3430e2]{display:table;width:100%;height:2.93333rem;border-bottom:1px solid #f3f3f3;background-color:#fff}.v-list-item .img[data-v-4e3430e2]{display:table-cell;width:3.73333rem;vertical-align:middle;text-align:center}.v-list-item .img img[data-v-4e3430e2]{width:2.4rem;height:1.86667rem}.v-list-item .describe[data-v-4e3430e2]{display:table-cell;vertical-align:middle}.v-list-item .describe span[data-v-4e3430e2]:nth-child(1){overflow:hidden;text-overflow:ellipsis;display:-webkit-box;-webkit-line-clamp:2;-webkit-box-orient:vertical;margin-bottom:.09333rem}",""])},200:function(t,e,a){e=t.exports=a(172)(),e.push([t.i,".v-back-top[data-v-e187f5c2]{position:fixed;right:.66667rem;bottom:.66667rem;width:.93333rem;height:.93333rem;line-height:.93333rem;text-align:center;border-radius:50%;color:#fff;background-color:#de443b;box-shadow:.02667rem .06667rem .13333rem rgba(0,15,15,.3)}",""])},202:function(t,e,a){var r,o;a(212),r=a(214);var i=a(208);o=r=r||{},"object"!=typeof r.default&&"function"!=typeof r.default||(o=r=r.default),"function"==typeof o&&(o=o.options),o.render=i.render,o.staticRenderFns=i.staticRenderFns,o._scopeId="data-v-e187f5c2",t.exports=r},204:function(t,e,a){var r,o;a(210),r=a(216);var i=a(206);o=r=r||{},"object"!=typeof r.default&&"function"!=typeof r.default||(o=r=r.default),"function"==typeof o&&(o=o.options),o.render=i.render,o.staticRenderFns=i.staticRenderFns,o._scopeId="data-v-4e3430e2",t.exports=r},206:function(t,e){t.exports={render:function(){var t=this,e=(t.$createElement,t._c);return e("div",{staticClass:"v-list-item"},[e("div",{staticClass:"img"},[e("img",{attrs:{src:t.img}})]),t._v(" "),e("div",{staticClass:"describe"},[e("span",{staticClass:"text-huge "},[t._v(t._s(t.title))]),t._v(" "),e("span",{class:t.color},[t._v(t._s(t.titleDupty))])])])},staticRenderFns:[]}},208:function(t,e){t.exports={render:function(){var t=this,e=(t.$createElement,t._c);return e("transition",{attrs:{name:"fade"}},[e("div",{directives:[{name:"show",rawName:"v-show",value:t.show,expression:"show"}],staticClass:" v-back-top ",on:{click:t.backTop}},[e("i",{staticClass:" icon-arrows-up iconfont text-small text-bold"})])])},staticRenderFns:[]}},210:function(t,e,a){var r=a(198);"string"==typeof r&&(r=[[t.i,r,""]]);a(173)(r,{});r.locals&&(t.exports=r.locals)},212:function(t,e,a){var r=a(200);"string"==typeof r&&(r=[[t.i,r,""]]);a(173)(r,{});r.locals&&(t.exports=r.locals)},214:function(t,e,a){"use strict";var r=a(18),o=a.n(r);e.default={name:"back_top",data:function(){return{show:!1}},methods:{backTop:function(){var t=o.a.getScrollTop(),e=window.setInterval(function(){t>=0?(t-=150,window.scrollTo(0,t)):window.clearInterval(e)},10)}},created:function(){var t=this;window.addEventListener("scroll",function(){t.show=o.a.getScrollTop()>1e3})}}},216:function(t,e,a){"use strict";e.default={name:"v-list-item",props:{title:{type:String,default:""},titleDupty:{type:String,default:""},color:{type:String,default:"text-gray"},img:{type:String,default:""}}}},229:function(t,e,a){e=t.exports=a(172)(),e.push([t.i,".search-box[data-v-409b263f]{padding:.22667rem .4rem;position:fixed;z-index:1;background-color:#f3f3f3}.fill[data-v-409b263f]{height:1.33333rem}.sort[data-v-409b263f]{border-top:1px solid #f3f3f3;border-bottom:1px solid #f3f3f3;height:1.4rem;line-height:1.4rem}.sort>li[data-v-409b263f]{width:50%;text-align:center}.sort>li[data-v-409b263f]:nth-child(1){position:relative}.arrows[data-v-409b263f]{position:absolute;right:0;top:50%;-ms-transform:translateY(-50%);-moz-transform:translateY(-50%);-webkit-transform:translateY(-50%);-o-transform:translateY(-50%);line-height:.24rem;right:.26667rem}.arrows i[data-v-409b263f]{font-size:.24rem;display:block}",""])},232:function(t,e,a){e=t.exports=a(172)(),e.push([t.i,".v-search[data-v-4e1eadca]{width:9.2rem;height:.88rem;line-height:.88rem;border-radius:.06667rem;background-color:#fff}.v-search input[data-v-4e1eadca]{width:8.13333rem;border:0;text-indent:27px}.v-search input[type=search][data-v-4e1eadca]::-webkit-search-cancel-button{display:none}.v-search .iconfont[data-v-4e1eadca]{float:right;margin-right:.46667rem}",""])},261:function(t,e,a){var r,o;a(297),r=a(320);var i=a(276);o=r=r||{},"object"!=typeof r.default&&"function"!=typeof r.default||(o=r=r.default),"function"==typeof o&&(o=o.options),o.render=i.render,o.staticRenderFns=i.staticRenderFns,o._scopeId="data-v-4e1eadca",t.exports=r},273:function(t,e){t.exports={render:function(){var t=this,e=(t.$createElement,t._c);return e("div",{staticClass:"product-list"},[e("div",{staticClass:"search-box"},[e("v-search",{attrs:{search:t.searchProduct,params:t.params}})]),t._v(" "),e("div",{staticClass:"fill"}),t._v(" "),e("ul",{staticClass:"sort list-inline"},[e("li",{staticClass:" text-huge",on:{click:t.sortByIntegral}},[e("span",{class:["count"!=t.sort_type&&t.sort_type?"text-red":""]},[t._v("消耗积分排序")]),t._v(" "),e("div",{staticClass:"arrows"},[e("i",{class:["icon-arrows-up","iconfont","text-bold","integral-up"==t.sort_type?"text-red":""]}),t._v(" "),e("i",{class:["icon-arrows-down","iconfont","text-bold","integral-down"==t.sort_type?"text-red":""]})])]),t._v(" "),e("li",{class:["text-huge","count"==t.sort_type?"text-red":""],on:{click:t.sortByCount}},[t._v("\n            兑换量优先\n        ")])]),t._v(" "),t._l(t.product_list,function(t){return e("router-link",{attrs:{to:{name:"product_detail",query:{product_id:t.id}},tag:"div"}},[e("v-list-item",{attrs:{title:t.name,"title-dupty":parseInt(t.integral)+"积分",img:t.pic_thumb,color:"text-red"}})])}),t._v(" "),e("v-back-top")],!0)},staticRenderFns:[]}},276:function(t,e){t.exports={render:function(){var t=this,e=(t.$createElement,t._c);return e("div",{staticClass:"v-search ",on:{submit:function(t){t.preventDefault()}}},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.params.sword,expression:"params.sword"}],staticClass:"text-sliver text-large",attrs:{type:"search",placeholder:t.placeholder},domProps:{value:t._s(t.params.sword)},on:{keyup:function(e){t._k(e.keyCode,"enter",13)||t.search()},input:function(e){e.target.composing||(t.params.sword=e.target.value)}}}),t._v(" "),e("i",{staticClass:"iconfont icon-search text-sliver text-huge ",on:{click:function(e){t.search()}}})])},staticRenderFns:[]}},294:function(t,e,a){var r=a(229);"string"==typeof r&&(r=[[t.i,r,""]]);a(173)(r,{});r.locals&&(t.exports=r.locals)},297:function(t,e,a){var r=a(232);"string"==typeof r&&(r=[[t.i,r,""]]);a(173)(r,{});r.locals&&(t.exports=r.locals)},320:function(t,e,a){"use strict";e.default={name:"search",props:{placeholder:{type:String,default:"请输入关键字进行过滤"},search:Function,params:Object}}},328:function(t,e,a){"use strict";var r=a(18),o=a.n(r),i=a(261),s=a.n(i),n=a(204),c=a.n(n),l=a(202),d=a.n(l),p=a(74),u=a.n(p);e.default={name:"product_list",components:{vListItem:c.a,vSearch:s.a,vBackTop:d.a,vSpinner:u.a},beforeRouteLeave:function(t,e,a){window.removeEventListener("scroll",this.getScrollData),a()},activated:function(){var t=o.a.getSessionStorage("position:"+this.$route.name);window.scrollTo(0,t)},data:function(){return{product_list:[],params:{sword:"",p:1,r:APP.PERPAGE,total:0,count:0,token:APP.TOKEN,userid:APP.USER_ID,media_id:APP.MEDIA_ID,_order:""},sort_type:"",scroll:!1,loading:!1}},mounted:function(){this.getProductList(),window.addEventListener("scroll",this.getScrollData)},methods:{getScrollData:function(){var t=this;this.scroll=!0,o.a.debounce(function(){t.scroll&&o.a.touchBottom()&&t.params.p<t.params.total&&!t.loading&&(t.params.p++,t.scroll=!1,t.loading=!0,t.getProductList(function(){t.loading=!1}))},500)()},getProductList:function(t){var e=this;this.$store.dispatch("toggleLoading",{show:!0}),this.$http.post(APP.HOST+"/all_product",this.params).then(function(a){var r=a.data;e.$store.dispatch("toggleLoading"),t&&t(),e.params.total=r.data.total,e.product_list=e.product_list.concat(r.data.list)},function(t){e.$store.dispatch("toggleLoading")})},searchProduct:function(){var t=this;this.$store.dispatch("toggleLoading",{show:!0}),this.initParams(),this.$http.post(APP.HOST+"/all_product",this.params).then(function(e){var a=e.data;t.$store.dispatch("toggleLoading"),t.loading=!0,t.params.total=a.data.total,t.product_list=a.data.list},function(e){t.$store.dispatch("toggleLoading")})},initParams:function(){var t=this.params.sword;this.params={sword:t,p:1,r:APP.PERPAGE,total:0,count:0,token:APP.TOKEN,userid:APP.USER_ID,media_id:APP.MEDIA_ID,_order:""}},sortByIntegral:function(){var t=this;this.initParams(),"integral-up"==this.sort_type?(this.sort_type="integral-down",this.params._order="integral:DESC"):(this.sort_type="integral-up",this.params._order="integral:ASC"),this.getProductList(function(){t.product_list=[]})},sortByCount:function(){var t=this;this.initParams(),this.params._order="used_count:DESC","count"!=this.sort_type&&(this.sort_type="count",this.getProductList(function(){t.product_list=[]}))}}}}});