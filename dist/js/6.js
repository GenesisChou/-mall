webpackJsonp([6],{124:function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={props:{order:Object,img:String,id:String,integral:Number,name:String}}},125:function(t,e,r){e=t.exports=r(0)(),e.push([t.i,".v-order-header[data-v-aae655e4]{padding-left:.4rem;line-height:1.01333rem;font-size:.32rem;color:#646565;background-color:#fff}.v-order-header .iconfont[data-v-aae655e4]{font-size:.4rem;margin-right:.16rem;vertical-align:middle}.v-order-main[data-v-aae655e4]{display:flex;align-items:center;display:-webkit-flex;-webkit-align-items:center;height:2.06667rem;border-top:1px solid #f2f3f4;padding:0 .4rem;background-color:#fff}.v-order-main .pic[data-v-aae655e4]{width:2.13333rem;height:1.6rem}.v-order-main .describe[data-v-aae655e4]{flex:1;display:flex;flex-direction:column;justify-content:space-between;-webkit-flex:1;display:-webkit-flex;-webkit-justify-content:space-between;height:80%;padding-left:.33333rem}.v-order-main .describe h2[data-v-aae655e4]{height:.8rem;line-height:.8rem;color:#3d4244;font-size:.45333rem}.v-order-main .describe p[data-v-aae655e4]{color:#a9aaae;font-size:.32rem}.v-order-main .describe span[data-v-aae655e4]{float:right}",""])},126:function(t,e,r){var i=r(125);"string"==typeof i&&(i=[[t.i,i,""]]);r(1)(i,{});i.locals&&(t.exports=i.locals)},127:function(t,e,r){r(126);var i=r(2)(r(124),r(128),"data-v-aae655e4",null);t.exports=i.exports},128:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"v-order"},[r("header",{staticClass:"v-order-header"},[r("i",{staticClass:"iconfont  icon-order"}),t._v(" 订单号："+t._s(t.id)+"\n    ")]),t._v(" "),r("main",{staticClass:"v-order-main"},[r("img",{staticClass:"pic",attrs:{src:t.img}}),t._v(" "),r("div",{staticClass:"describe"},[r("h2",{staticClass:"text-ellipsis"},[t._v(t._s(t.name))]),t._v(" "),r("p",[t._v(" "+t._s(t.integral)+"积分\n                "),r("span",[t._v("x1")])])])]),t._v(" "),r("footer",[t._t("default")],2)])},staticRenderFns:[]}},157:function(t,e,r){"use strict";(function(t,i){Object.defineProperty(e,"__esModule",{value:!0});var a=r(127),n=r.n(a);e.default={name:"orderList",components:{vOrder:n.a},data:function(){return{order_list:{unsolved:[],untransported:[],solved:[],expired:[]},current_tab:0,current_type:"",params:{},scroll_events:{},tabs:[{type:"unsolved",name:"待处理"},{type:"untransported",name:"待发货"},{type:"solved",name:"已完成"},{type:"expired",name:"已逾期"}],busy:!1,has_entered:!1}},computed:{user:function(){return this.$store.state.user}},beforeRouteEnter:function(t,e,r){r(function(t){"order_detail"==e.name&&t.has_entered||(t.init(),t.switchTab(1),t.has_entered=!0),window.addEventListener("scroll",t.scroll_events[t.current_type])})},activated:function(){var e=t.getSessionStorage("position:"+this.$route.name);e&&window.scrollTo(0,e)},beforeRouteLeave:function(t,e,r){window.removeEventListener("scroll",this.scroll_events[this.current_type]),r()},methods:{init:function(){var t=this;this.order_list.unsolved=[],this.order_list.untransported=[],this.order_list.solved=[],this.order_list.expired=[],this.tabs.forEach(function(e,r){var a=e.type,n=r+1;t.params[a]={p:1,r:i.PERPAGE,total:0,token:i.TOKEN,userid:i.USER_ID,class:n},t.scroll_events[a]=t.getScrollEvent(n,t.params[a],function(e){t.order_list[a]=t.order_list[a].concat(e.data.list)})})},getOrderList:function(t,e){var r=this;return new Promise(function(a,n){r.$http.post(i.HOST+"/order_list/"+i.USER_ID+"/"+t,e).then(function(t){var e=t.data;a&&a(e)},function(t){n&&n(data)})})},getScrollEvent:function(e,r,i,a){var n=this,o=!0;return t.debounce(function(){n.busy=r.total>r.p,o&&n.busy&&t.touchBottom()&&(o=!1,r.p++,n.getOrderList(e,r).then(function(t){i(t),o=!0}).catch(function(t){a(t)}))},500,500)},switchTab:function(t){var e=this;this.current_tab=t,this.current_type=this.tabs[this.current_tab-1].type;var r=this.current_type;this.busy=this.params[r].total>this.params[r].p,this.tabs.forEach(function(t){t.type==r?window.addEventListener("scroll",e.scroll_events[t.type]):window.removeEventListener("scroll",e.scroll_events[t.type])}),this.params[r].total||(this.$store.dispatch("toggleLoading"),this.getOrderList(t,this.params[r]).then(function(t){e.$store.dispatch("toggleLoading");var i=t.data.p,a=t.data.total;e.params[r].total=a,e.order_list[r]=e.order_list[r].concat(t.data.list),a>i&&(e.busy=!0)}).catch(function(t){e.$store.dispatch("toggleLoading")}))},getIconType:function(t){var e=["icon-order-unsolved","icon-car","icon-solved","icon-delete"],r="";return e.forEach(function(e,i){if(i==t)return void(r=e)}),r}}}}).call(e,r(5),r(3))},195:function(t,e,r){e=t.exports=r(0)(),e.push([t.i,'.order-list[data-v-a22114b6]{min-height:100%;padding-top:.26667rem}.tabs[data-v-a22114b6]{display:flex;display:-webkit-flex;background-color:#fff;margin-bottom:.26667rem;border-bottom:1px solid #d3d4d6}.tabs li[data-v-a22114b6]{flex:1;display:flex;align-items:center;justify-content:center;flex-direction:column;-webkit-flex:1;display:-webkit-flex;-webkit-align-items:center;-webkit-justify-content:center;height:1.70667rem;text-align:center;list-style:none;position:relative}.tabs li.active[data-v-a22114b6]{color:#ff5000}.tabs li.active[data-v-a22114b6]:before{content:"";position:absolute;left:17.5%;bottom:0;width:65%;height:.05333rem;background-color:#ff5000}.tabs li.active .iconfont[data-v-a22114b6]{color:#ff5000}.tabs .iconfont[data-v-a22114b6]{font-size:.73333rem;color:#666}.tabs h6[data-v-a22114b6]{margin-top:-.13333rem}.tabs .badage[data-v-a22114b6]{display:flex;align-items:center;justify-content:center;display:-webkit-flex;-webkit-align-items:center;-webkit-justify-content:center;width:.48rem;height:.48rem;position:absolute;right:.66667rem;top:.13333rem;color:#ff5000;border-radius:50%;text-align:center;box-sizing:content-box;border:.04rem solid #ff5000;background-color:#fff;font-size:.32rem;transform:scale(.8);-webkit-transform:scale(.8);z-index:1}.v-order-footer[data-v-a22114b6]{padding-left:.4rem;margin-bottom:.26667rem;line-height:.88rem;border-top:1px solid #f2f3f4;border-bottom:1px solid #d3d4d6;color:#ff5000;background-color:#fff}',""])},225:function(t,e,r){var i=r(195);"string"==typeof i&&(i=[[t.i,i,""]]);r(1)(i,{});i.locals&&(t.exports=i.locals)},25:function(t,e,r){"use strict";t.exports=r(303)},303:function(t,e,r){r(225);var i=r(2)(r(157),r(329),"data-v-a22114b6",null);t.exports=i.exports},329:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"order-list"},[r("ul",{staticClass:"tabs"},t._l(t.tabs,function(e,i){return r("li",{class:{active:i+1==t.current_tab},on:{click:function(e){t.switchTab(i+1)}}},[r("i",{class:["iconfont",t.getIconType(i)]}),t._v(" "),r("h6",[t._v(t._s(e.name))]),t._v(" "),0==i&&t.user.unfinished_order_count>0?r("span",{staticClass:"badage"},[t._v(t._s(t.user.unfinished_order_count))]):t._e()])})),t._v(" "),r("ul",t._l(t.order_list[t.current_type],function(e){return r("router-link",{attrs:{to:{name:"order_detail",query:{order_id:parseInt(e.id)}},tag:"li"}},[r("v-order",{attrs:{img:e.product_pic,id:e.orderid,integral:e.integral>>0,name:e.product}},[r("h6",{staticClass:"v-order-footer"},[t._v("\n                    "+t._s(e.tips)+"\n                ")])])],1)})),t._v(" "),t.busy?r("v-load-more"):t._e(),t._v(" "),r("v-back-top")],1)},staticRenderFns:[]}}});