webpackJsonp([6],{133:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={props:{order:Object,img:String,id:String,integral:Number,name:String,hasBorder:{type:Boolean,default:!1},active:{type:Boolean,default:!1}}}},134:function(e,t,r){t=e.exports=r(0)(),t.push([e.i,".v-order.active:active .v-order-footer[data-v-aae655e4],.v-order.active:active .v-order-header[data-v-aae655e4],.v-order.active:active .v-order-main[data-v-aae655e4]{background-color:#fafafa}.v-order-header[data-v-aae655e4]{padding-left:.4rem;line-height:1.01333rem;font-size:.32rem;color:#646565;background-color:#fff}.v-order-header .iconfont[data-v-aae655e4]{font-size:.4rem;margin-right:.16rem;vertical-align:middle}.v-order-main[data-v-aae655e4]{display:flex;align-items:center;display:-webkit-flex;-webkit-align-items:center;height:2.06667rem;border-top:1px solid #f2f3f4;padding:0 .4rem;background-color:#fff}.v-order-main.border[data-v-aae655e4]{border-bottom:1px solid #d3d4d6}.v-order-main .pic[data-v-aae655e4]{width:2.13333rem;height:1.6rem}.v-order-main .describe[data-v-aae655e4]{flex:1;display:flex;flex-direction:column;justify-content:space-between;-webkit-flex:1;display:-webkit-flex;-webkit-justify-content:space-between;height:80%;padding-left:.33333rem}.v-order-main .describe h2[data-v-aae655e4]{height:.8rem;line-height:.8rem;color:#3d4244;font-size:.45333rem}.v-order-main .describe p[data-v-aae655e4]{color:#a9aaae;font-size:.32rem}.v-order-main .describe span[data-v-aae655e4]{float:right}",""])},135:function(e,t,r){var a=r(134);"string"==typeof a&&(a=[[e.i,a,""]]);r(1)(a,{});a.locals&&(e.exports=a.locals)},136:function(e,t,r){r(135);var a=r(2)(r(133),r(137),"data-v-aae655e4",null);e.exports=a.exports},137:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{class:["v-order",{active:e.active}]},[r("header",{staticClass:"v-order-header"},[r("i",{staticClass:"iconfont  icon-order"}),e._v(" 订单号："+e._s(e.id)+"\n    ")]),e._v(" "),r("main",{class:["v-order-main",{border:e.hasBorder}]},[r("img",{staticClass:"pic",attrs:{src:e.img}}),e._v(" "),r("div",{staticClass:"describe"},[r("h2",{staticClass:"text-ellipsis"},[e._v(e._s(e.name))]),e._v(" "),r("p",[e._v(" "+e._s(e.integral)+"积分\n                "),r("span",[e._v("x1")])])])]),e._v(" "),r("footer",[e._t("default")],2)])},staticRenderFns:[]}},171:function(e,t,r){"use strict";(function(e,a){Object.defineProperty(t,"__esModule",{value:!0});var i=r(136),o=r.n(i);t.default={name:"orderList",components:{vOrder:o.a},data:function(){return{order_list:{unsolved:[],untransported:[],solved:[],expired:[]},current_tab:0,current_type:"",params:{},scroll_events:{},tabs:[{type:"unsolved",name:"待处理"},{type:"untransported",name:"待发货"},{type:"solved",name:"已完成"},{type:"expired",name:"已逾期"}],busy:!1,has_entered:!1}},computed:{user:function(){return this.$store.state.user}},beforeRouteEnter:function(e,t,r){r(function(e){"order_detail"==t.name&&e.has_entered||(e.init(),e.switchTab(1),e.has_entered=!0),window.addEventListener("scroll",e.scroll_events[e.current_type])})},activated:function(){var t=e.getSessionStorage("position:"+this.$route.name);t&&window.scrollTo(0,t)},beforeRouteLeave:function(e,t,r){window.removeEventListener("scroll",this.scroll_events[this.current_type]),r()},methods:{init:function(){var e=this;this.order_list.unsolved=[],this.order_list.untransported=[],this.order_list.solved=[],this.order_list.expired=[],this.tabs.forEach(function(t,r){var i=t.type,o=r+1;e.params[i]={p:1,r:a.PERPAGE,total:0,token:a.TOKEN,userid:a.USER_ID,class:o},e.scroll_events[i]=e.getScrollEvent(o,e.params[i],function(t){e.order_list[i]=e.order_list[i].concat(t.data.list)})})},getOrderList:function(e,t){var r=this;return new Promise(function(i,o){r.$http.post(a.HOST+"/order_list/"+a.USER_ID+"/"+e,t).then(function(e){var t=e.data;i&&i(t)},function(e){o&&o(data)})})},getScrollEvent:function(t,r,a,i){var o=this,n=!0;return e.debounce(function(){o.busy=r.total>r.p,n&&o.busy&&e.touchBottom()&&(n=!1,r.p++,o.getOrderList(t,r).then(function(e){a(e),n=!0}).catch(function(e){i(e)}))},500,500)},switchTab:function(e){var t=this;this.current_tab=e,this.current_type=this.tabs[this.current_tab-1].type;var r=this.current_type;this.busy=this.params[r].total>this.params[r].p,this.tabs.forEach(function(e){e.type==r?window.addEventListener("scroll",t.scroll_events[e.type]):window.removeEventListener("scroll",t.scroll_events[e.type])}),this.params[r].total||(this.$store.dispatch("toggleLoading"),this.getOrderList(e,this.params[r]).then(function(e){t.$store.dispatch("toggleLoading");var a=e.data.p,i=e.data.total;t.params[r].total=i,t.order_list[r]=t.order_list[r].concat(e.data.list),i>a&&(t.busy=!0)}).catch(function(e){t.$store.dispatch("toggleLoading")}))},getIconType:function(e){var t=["icon-order-unsolved","icon-car","icon-solved","icon-delete"],r="";return t.forEach(function(t,a){if(a==e)return void(r=t)}),r}}}}).call(t,r(5),r(3))},219:function(e,t,r){t=e.exports=r(0)(),t.push([e.i,'.order-list[data-v-a22114b6]{min-height:100%;padding-top:.26667rem}.tabs[data-v-a22114b6]{display:flex;display:-webkit-flex;background-color:#fff;margin-bottom:.26667rem;border-bottom:1px solid #d3d4d6}.tabs li[data-v-a22114b6]{flex:1;display:flex;align-items:center;justify-content:center;flex-direction:column;-webkit-flex:1;display:-webkit-flex;-webkit-align-items:center;-webkit-justify-content:center;height:1.70667rem;text-align:center;list-style:none;position:relative}.tabs li.active[data-v-a22114b6]{color:#ff5000}.tabs li.active[data-v-a22114b6]:before{content:"";position:absolute;left:17.5%;bottom:0;width:65%;height:.05333rem;background-color:#ff5000}.tabs li.active .iconfont[data-v-a22114b6]{color:#ff5000}.tabs .iconfont[data-v-a22114b6]{font-size:.73333rem;color:#666}.tabs h6[data-v-a22114b6]{margin-top:-.13333rem}.tabs .badage[data-v-a22114b6]{display:flex;align-items:center;justify-content:center;display:-webkit-flex;-webkit-align-items:center;-webkit-justify-content:center;width:.48rem;height:.48rem;position:absolute;right:.66667rem;top:.13333rem;color:#ff5000;border-radius:50%;text-align:center;box-sizing:content-box;border:.04rem solid #ff5000;background-color:#fff;font-size:.32rem;transform:scale(.8);-webkit-transform:scale(.8);z-index:1}.v-order-footer[data-v-a22114b6]{padding-left:.4rem;margin-bottom:.26667rem;line-height:.88rem;border-top:1px solid #f2f3f4;border-bottom:1px solid #d3d4d6;color:#ff5000;background-color:#fff}',""])},25:function(e,t,r){"use strict";e.exports=r(359)},255:function(e,t,r){var a=r(219);"string"==typeof a&&(a=[[e.i,a,""]]);r(1)(a,{});a.locals&&(e.exports=a.locals)},359:function(e,t,r){r(255);var a=r(2)(r(171),r(389),"data-v-a22114b6",null);e.exports=a.exports},389:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"order-list"},[r("ul",{staticClass:"tabs"},e._l(e.tabs,function(t,a){return r("li",{class:{active:a+1==e.current_tab},on:{click:function(t){e.switchTab(a+1)}}},[r("i",{class:["iconfont",e.getIconType(a)]}),e._v(" "),r("h6",[e._v(e._s(t.name))]),e._v(" "),0==a&&e.user.unfinished_order_count>0?r("span",{staticClass:"badage"},[e._v(e._s(e.user.unfinished_order_count))]):e._e()])})),e._v(" "),r("ul",{staticClass:"list"},e._l(e.order_list[e.current_type],function(t,a){return r("router-link",{attrs:{to:{name:"order_detail",query:{order_id:parseInt(t.id)}},tag:"li"}},[r("v-order",{attrs:{img:t.product_pic,id:t.orderid,integral:t.integral>>0,name:t.product,active:!0}},[r("h6",{staticClass:"v-order-footer"},[e._v("\n                    "+e._s(t.tips)+"\n                ")])])],1)})),e._v(" "),e.busy?r("v-load-more"):e._e(),e._v(" "),r("v-back-top")],1)},staticRenderFns:[]}}});