webpackJsonp([9],{138:function(t,e,i){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0}),e.default={name:"productDetail",data:function(){return{product_id:"",product_detail:"",order_detail_id:"",content_show:!1}},computed:{user:function(){return this.$store.state.user},integral_enough:function(){return this.user.integral>>0>=this.integral},integral:function(){return this.$route.query.integral||this.product_detail.integral>>0||0},product_name:function(){return this.$route.query.name||this.product_detail.name}},watch:{product_id:function(){var t=this;this.content_show=!1,this.getProductDetail().then(function(){t.content_show=!0})},order_detail_id:function(){this.$store.dispatch("getUserInfor"),this.$store.dispatch("toggleAlert",{close_btn:!0,msg:"获得"+this.product_name,type:"img",img:this.product_detail.pic_thumb,btn_text:"查看",callback:this.toOrderDetail})}},activated:function(){this.product_id=this.$route.query.product_id},methods:{getProductDetail:function(){var e=this;return new Promise(function(i,n){e.$store.dispatch("toggleLoading"),e.$http.post(t.HOST+"/product_detail_l/"+e.product_id,{token:t.TOKEN,media_id:t.MEDIA_ID,user_id:t.USER_ID,open_id:t.OPEN_ID}).then(function(t){e.$store.dispatch("toggleLoading");var n=t.data;e.product_detail=n.data,i&&i()},function(t){e.$store.dispatch("toggleLoading")})})},exchange:function(){var t=this;this.$store.dispatch("toggleConfirm",{msg:"确认兑换该商品吗?",callback:function(){t.order().then(function(e){t.order_detail_id=e.data.id}).catch(function(e){t.$store.dispatch("toggleAlert",{msg:e.info})})}})},order:function(){var e=this;return new Promise(function(i,n){e.$store.dispatch("toggleLoading"),e.$http.post(t.HOST+"/product_order/"+e.product_id,{token:t.TOKEN,user_id:t.USER_ID}).then(function(r){e.$store.dispatch("toggleLoading");var o=r.data;o.status==t.SUCCESS?i(o):n(o)},function(t){e.$store.dispatch("toggleLoading"),n(t.data)})})},toOrderDetail:function(){this.$router.push({name:"order_detail",query:{order_id:this.order_detail_id}})}}}}).call(e,i(3))},180:function(t,e,i){e=t.exports=i(0)(),e.push([t.i,".header[data-v-f2cf4366]{height:5.33333rem;position:relative}.header .cover[data-v-f2cf4366]{display:flex;align-items:center;display:-webkit-flex;-webkit-align-items:center;position:absolute;left:0;right:0;bottom:0;height:1.33333rem;padding-left:.73333rem;background:rgba(0,0,0,.5);color:#fff}.main[data-v-f2cf4366]{min-height:11rem;padding:.66667rem;background-color:#fff}.sticky[data-v-f2cf4366]{position:fixed;bottom:0;left:0;right:0;border-top:1px solid #f2f3f4;background-color:#fff;justify-content:space-between;-webkit-justify-content:space-between;padding-left:.73333rem;z-index:1}.sticky[data-v-f2cf4366],.sticky a[data-v-f2cf4366]{height:1.46667rem;display:flex;align-items:center;display:-webkit-flex;-webkit-align-items:center}.sticky a[data-v-f2cf4366]{justify-content:center;-webkit-justify-content:center;width:2.4rem;font-size:.4rem;text-indent:.16rem;letter-spacing:.16rem}.sticky .integral[data-v-f2cf4366]{color:#de443b}.sticky .btn-disable[data-v-f2cf4366]{color:#fff;background-color:#838385;letter-spacing:0;text-indent:0}",""])},210:function(t,e,i){var n=i(180);"string"==typeof n&&(n=[[t.i,n,""]]);i(1)(n,{});n.locals&&(t.exports=n.locals)},26:function(t,e,i){"use strict";t.exports=i(287)},287:function(t,e,i){i(210);var n=i(2)(i(138),i(317),"data-v-f2cf4366",null);t.exports=n.exports},317:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"product-detail"},[i("header",{directives:[{name:"show",rawName:"v-show",value:t.content_show,expression:"content_show"}],staticClass:"header "},[i("img",{staticClass:"img-responsive",attrs:{src:t.product_detail.pic_banner}}),t._v(" "),i("h1",{staticClass:"cover text-ellipsis"},[t._v("\n            "+t._s(t.product_name)+"\n        ")])]),t._v(" "),i("article",{directives:[{name:"show",rawName:"v-show",value:t.content_show,expression:"content_show"}],staticClass:"main "},[i("v-simditor",[t.product_detail.content?[i("v-divider",{attrs:{text:"详细说明"}}),t._v(" "),i("div",{domProps:{innerHTML:t._s(t.product_detail.content)}})]:t._e(),t._v(" "),t.product_detail.content_use?[i("v-divider",{attrs:{text:"使用说明"}}),t._v(" "),i("div",{domProps:{innerHTML:t._s(t.product_detail.content_use)}})]:t._e()],2)],1),t._v(" "),i("footer",{staticClass:"sticky"},[i("h4",{staticClass:"pull-left"},[t._v("\n            单价："),i("span",{staticClass:"integral"},[t._v(t._s(t.integral))]),t._v("积分\n        ")]),t._v(" "),t.integral_enough?i("a",{staticClass:"btn-red pull-right",on:{click:t.exchange}},[t._v("兑换")]):i("a",{staticClass:"btn-disable pull-right"},[t._v("积分不足")])])])},staticRenderFns:[]}}});